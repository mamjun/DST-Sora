--[[
授权级别:不授权
Copyright 2025 [FL]。
该文件仅限我自己使用 谢绝授权
]]
-- 请勿破解本文件
local B__u__g__=modname;local __B_Ug__=GetModConfigData(("\110\101\105\108\67"):reverse().."\116\80\114\111\120".."\121")=="\49"local __b__u__G=B__u__g__.."\95\114\112\99"local __B__u__G=string.char(112, 114, 111, 120, 121)local __B_u_g__=(139*126*200==3502807)local __B_U_G_=B__u__g__.."\95\112\114\111\120\121"local B_uG="\104\116\116\112".."\58\47\47\49\50\55".."\46\48\46\48\46\49".."\58\53\48\50".."\48\53\47\112\114".."\111\120\121".."\46\112\104\112"local _b__ug_=(259+365+345-458==515)local B__UG__=TheNet:GetIsServer()local __BU_g_=TheShard:GetShardId()if not ClearTableBy then local function __bU__g_(__B__U_g_,_b__Ug__)local _bu__g__={}for __Bu_G__,__bu_g__ in pairs(__B__U_g_)do if _b__Ug__(__Bu_G__,__bu_g__)then _bu__g__[__Bu_G__]=1 end end;for _B__U__G_,b_ug_ in pairs(_bu__g__)do __B__U_g_[_B__U__G_]=nil end;return __B__U_g_ end end;function IsHttpOK()return _b__ug_ or(257+171-368*331*436~=-53107860)end;function HasHttpOK()if IsHttpOK()then return( true or  false and  false and not false or  false or  false and  false or  true and not true and not false and  true and not false and not false)end;if not B__UG__ then return TheWorld and TheWorld["\110\101\116"]:HasTag(__B_U_G_)and(65+251+199*412~=82313)or(290+134-23~=401)end if B__UG__ and __B_Ug__ and QueryManager then if next(QueryManager[string.char(97, 108, 108)..string.char(112, 97, 116, 104)][1])then return(230*406*434*82==3323207440)end;if next(QueryManager["\97\108\108\112"..string.char(97, 116, 104)][2])then return(14-2-487+82~=-389)end;if next(QueryManager[string.char(97, 108, 108).."\112\97\116\104"][3])then return(75*326*470+136==11491636)end end;return(117+340+228~=685)end;function ServerHasHttpOK()if B__UG__ then return HasHttpOK()end;return TheWorld and TheWorld[string.char(110, 101, 116)]:HasTag(__B_U_G_)and(168+132*389-382+282==51416)or(238-422-113==-294)end;local function _B_u_G_(...)if __B_u_g__ then local __B__u__G_={...}for __b_Ug_,_B__UG in pairs(__B__u__G_)do if type(_B__UG)==string.char(116, 97, 98, 108).."\101"then __B__u__G_[__b_Ug_]=fastdump(_B__UG):sub(1,20)elseif type(_B__UG)=="\115\116\114\105\110\103"then __B__u__G_[__b_Ug_]=_B__UG:sub(1,20)end end;print("\80\82\79\88\89\68".."\69\66\85\71",B__u__g__,unpack(__B__u__G_))end end;local function _bU_g__()TheSim:QueryServer(B_uG.. ("\103\110\105\112\63"):reverse().."\61\49",function(_b__Ug_,_b_Ug,__Bug_)if _b_Ug and __Bug_==204 then _b__ug_=(281+101-145~=241)end end,"\80\79\83\84")end;_bU_g__()local function _bu_g_(__b__U_g__,b_Ug_,_B_ug__,__B_u_g_)local BU_G=string["\102\111\114".."\109\97\116"](("\91\91\115\37"):reverse().."\45\45\91\112"..string.char(114, 111, 120, 121, 93)..string.char(45, 45, 93, 93, 37, 115).."\91\91\45\45\91".."\112\114\111\120\121"..string.char(93, 45, 45, 93).."\93\37\115",_B_ug__=="\80\79\83".."\84"and("\83\79\80"):reverse().."\84"or "\71\69\84",__b__U_g__,__B_u_g_ or"")return TheSim:QueryServer(B_uG,b_Ug_,"\80\79\83".."\84",BU_G)end;function QueryServer(_BU_G,_bU__G,B__Ug__,__Bu_g__)if IsHttpOK()then return _bu_g_(_BU_G,_bU__G,B__Ug__,__Bu_g__)end;if QueryManager then return QueryManager:AddTask(_BU_G,_bU__G,B__Ug__,__Bu_g__)end;return _bu_g_(_BU_G,_bU__G,B__Ug__,__Bu_g__)end;AddModRPCHandler(__b__u__G,__B__u__G,function(b__U_G_,...)QueryManager:HandleRPC(1,b__U_G_,...)end)AddShardModRPCHandler(__b__u__G.."\95\115",__B__u__G,function(__B_U_G__,...)if __B_U_G__==__BU_g_ then return end;QueryManager:HandleRPC(2,__B_U_G__,...)end)AddClientModRPCHandler(__b__u__G.."\95\99",__B__u__G,function(__B_U__G_,...)QueryManager:HandleRPC(3,nil,__B_U__G_,...)end)local _Bu__g=GetModRPC(__b__u__G,__B__u__G)local _B_ug_=GetClientModRPC(__b__u__G.."\95\99",__B__u__G)local B_ug=GetShardModRPC(__b__u__G..string.char(95, 115),__B__u__G)MarkUserIDRPC(__b__u__G,__B__u__G)QueryManagerClass=Class(function(self)self[string.char(116, 97, 115, 107, 115)]={}self["\114\112\99\115"]={}self["\116\97\115\107"]=nil;self[string.char(109, 105, 100)]=__BU_g_..string.char(95)..tostring(math["\114\97\110\100\111".."\109"](10000,99999)+ ( (os[string.char(99, 108, 111)..string.char(99, 107)]()*1000)%10000))..string.char(95)self[string.char(105, 100, 115, 116, 97)..("\116\114"):reverse()]=1000000;self["\97\108\108\112\97\116".."\104"]={{},{},{}}end) function QueryManagerClass:PathReport(_b_UG__,b_Ug__,_B_u_g__,bUG_)if _b_UG__==string.char(115, 101, 114, 118, 101).."\114"then return elseif _b_UG__==string.char(115, 104, 97, 114, 100)then local _BuG=b_Ug__;for _B__u__g_,B_UG__ in pairs(self["\97\108\108\112".."\97\116\104"][1])do if B_UG__["\105\100"]==_BuG then B_UG__[string.char(72, 97, 115, 65, 100, 109).."\105\110"]=_B_u_g__ and(162*226*338*415~=5135565245)or(333+71*368~=26461)B_UG__[string.char(72, 97, 115, 80).."\108\97\121"..string.char(101, 114)]=bUG_ and(56+90*273-492-142~=23998)or(224-222-8+261~=255)return end end table["\105\110\115".."\101\114\116"](self["\97\108\108\112\97".."\116\104"][1],{id=_BuG,HasAdmin=(_B_u_g__ and(357*88+458~=31884)or(76+338+339-304~=449)),HasPlayer=(bUG_ and(220+328*362-111==118845)or(455-104*498*14~=-724633))})return elseif _b_UG__=="\99\108\105".."\101\110\116"then local Bug=b_Ug__;local Bug_=UserToPlayer(Bug)local b_u__G=(443+13*409+26+275~=6061)if Bug_ and Bug_[string.char(78, 101, 116).."\119\111\114\107"]and Bug_[string.char(78, 101, 116, 119).."\111\114\107"]:IsServerAdmin()then b_u__G=(102+492*221-352+263~=108750)end;for b_u__g_,__bU_G in pairs(self["\97\108\108\112".."\97\116\104"][2])do if __bU_G["\105\100"]==Bug then return end end;if b_u__G then table["\105\110\115\101"..string.char(114, 116)](self["\97\108\108\112".."\97\116\104"][2],{id=Bug})else for b__U_g,BU__g in pairs(self[string.char(97, 108, 108, 112, 97, 116).."\104"][3])do if BU__g["\105\100"]==Bug then return end end;table["\105\110\115\101\114\116"](self[string.char(112, 108, 108, 97):reverse().."\97\116\104"][3],{id=Bug})end end end;function QueryManagerClass:GetID()self["\105\100\115".."\116\97\114\116"]=self[string.char(105, 100, 115, 116, 97, 114).."\116"]+1;return self["\109\105\100"]..tostring(self["\105\100\115\116"..string.char(97, 114, 116)])end;function QueryManagerClass:FindTask(__B_U_g)for _B_Ug,buG__ in pairs(self["\116\97\115".."\107\115"])do if _B_Ug["\105\100"]==__B_U_g then return _B_Ug end end end;function QueryManagerClass:AddTask(__Bu__g_,bug,_BUG,_BU_g__,b__u_g_)local _B_UG__=QueryTask(__Bu__g_,bug,_BUG,_BU_g__)_B_UG__[string.char(105, 100)]=b__u_g_ or self:GetID()self["\116\97\115".."\107\115"][_B_UG__]=1;return _B_UG__ end;function QueryManagerClass:TaskOK(bug_,__b_Ug__,_b_u_g__,__b_u__G)if self["\116\97\115\107\115"][bug_]then if bug_["\102\114\111\109\116".."\121\112\101"]=="\115\101\108\102"then bug_["\99\98"](__b_Ug__,_b_u_g__,__b_u__G)elseif bug_["\102\114\111\109".."\116\121\112\101"]== ("\110\101\105\108\99"):reverse()..string.char(116)then SendModRPCToClient(_B_ug_,self["\102\114\111\109"],"\82\101\112\108".."\121",bug_["\105\100"],__b_Ug__,_b_u_g__,__b_u__G)elseif bug_["\102\114\111".."\109\116\121\112\101"]=="\115\101\114\118\101\114"then SendModRPCToServer(_Bu__g,string.char(108, 112, 101, 82):reverse().."\121",bug_["\105\100"],__b_Ug__,_b_u_g__,__b_u__G)elseif bug_["\102\114\111\109"..string.char(116, 121, 112, 101)]=="\115\104\97\114\100"then SendModRPCToShard(B_ug,self[("\109\111\114\102"):reverse()],string.char(82, 101, 112, 108).."\121",bug_["\105\100"],__b_Ug__,_b_u_g__,__b_u__G)end self["\116\97\115"..("\115\107"):reverse()][bug_]=nil else return end end;function QueryManagerClass:Timeout(_bu__G__) if self["\116\97\115\107".."\115"][_bu__G__]then if _bu__G__["\102\114\111\109".."\116\121\112\101"]=="\115\101\108\102"then _bu__G__["\99\98"](nil,(391+130+306+378-425==785),0)elseif _bu__G__["\102\114\111\109".."\116\121\112\101"]=="\99\108\105\101\110\116"then SendModRPCToClient(_B_ug_,self["\102\114\111\109"],"\84\105\109\101".."\111\117\116",_bu__G__["\105\100"])elseif _bu__G__["\102\114\111\109\116\121".."\112\101"]=="\115\101\114".."\118\101\114"then SendModRPCToServer(_Bu__g,string.char(84, 105, 109).."\101\111\117".."\116",_bu__G__["\105\100"])elseif _bu__G__["\102\114\111\109\116\121".."\112\101"]=="\115\104\97\114\100"then SendModRPCToShard(B_ug,self["\102\114\111".."\109"],"\84\105\109\101"..string.char(111, 117, 116),_bu__G__["\105\100"])end;self["\116\97\115\107\115"][_bu__G__]=nil else return end end;function QueryManagerClass:HandleRPC(bug__,B_U__g_,_b_U_G,__b_ug,__BUg_,B_u_G__,_B__UG_,...)local BUG__={bug__,B_U__g_,_b_U_G,__b_ug,__BUg_,B_u_G__,_B__UG_,...}table["\105\110\115\101\114\116"](self[string.char(114, 112, 99).."\115"],BUG__)end;function QueryManagerClass:HandleRPCOK(_b_u__g,__buG__,__b__uG_,B_ug_,__b_uG,B_U_G__,__BU__g_,...)local _B_u__G=""local bu__G=string.char(115, 101, 108).."\102"if _b_u__g==1 then bu__G="\99\108\105\101\110\116"_B_u__G=__buG__ elseif _b_u__g==2 then bu__G="\115\104\97"..string.char(114, 100)_B_u__G=__buG__ elseif _b_u__g==3 then bu__G=string.char(118, 114, 101, 115):reverse().."\101\114"end;if not(__b__uG_ and B_ug_)then return end;local __B_Ug_;if __b__uG_=="\81\117\101\114\121"then if not __B_Ug__ and bu__G=="\115\101\114\118".."\101\114"then return end;if B_ug_ and __b_uG and __BU__g_ then if __b_uG=="\80\79\83".."\84"or __b_uG== ("\84\69\71"):reverse()then __B_Ug_=self:AddTask(B_ug_,nil,__b_uG,B_U_G__,__BU__g_)__B_Ug_["\102\114\111\109"]=_B_u__G;__B_Ug_[("\111\114\102"):reverse().."\109\116\121"..("\101\112"):reverse()]=bu__G end end elseif __b__uG_==string.char(84, 105, 109, 101)..string.char(111, 117, 116)then if not __B_Ug__ and bu__G=="\99\108\105\101\110"..string.char(116)then return end;__B_Ug_=self:FindTask(B_ug_)if not __B_Ug_ then return end;self:Timeout(__B_Ug_)elseif __b__uG_=="\82\101\112".."\108\121"then if not __B_Ug__ and bu__G=="\99\108\105\101\110\116"then return end;__B_Ug_=self:FindTask(B_ug_)if not __B_Ug_ then return end self:TaskOK(__B_Ug_,__b_uG,B_U_G__,__BU__g_)elseif __b__uG_==string.char(80, 97, 116)..string.char(111, 112, 101, 82, 104):reverse().."\114\116"then if not __B_Ug__ and bu__G=="\99\108\105\101".."\110\116"then return end;self:PathReport(bu__G,_B_u__G,B_ug_,__b_uG)end end function QueryManagerClass:StartTask(__B__Ug_)if __B__Ug_[("\116\114\97\116\115"):reverse()]then return end;__B__Ug_["\115\116\97\114\116"]=(412-455*362~=-164296)__B__Ug_[("\117\111\101\109\105\116"):reverse().."\116"]=__B__Ug_[string.char(116, 105, 109)..string.char(101, 111, 117).."\116"]+GetTimeRealSeconds()if IsHttpOK()then QueryServer(__B__Ug_["\117\114\108"],function(...)self:TaskOK(__B__Ug_,...)end,__B__Ug_["\109\101\116\104\111".."\100"],__B__Ug_["\100\97\116\97"])return end;if not B__UG__ then if TheWorld then if TheWorld["\110\101\116"]and TheWorld[string.char(110, 101, 116)]:HasTag(__B_U_G_)then SendModRPCToServer(_Bu__g,"\81\117\101\114\121",__B__Ug_["\117\114\108"],__B__Ug_["\109\101\116\104\111\100"],__B__Ug_[string.char(100, 97, 116, 97)],__B__Ug_["\105\100"])else _B_u_G_("\87\97\105\116\70\111"..("\114\111\87\114"):reverse().."\108\100\79".."\75",__B__Ug_[("\100\105"):reverse()])__B__Ug_["\115\116\97\114\116"]=(14*18-270+312~=294)return end else __B__Ug_[string.char(116, 105, 109, 101).."\111\117\116"]=0 end;return else for __bUG,_b_u__G in pairs(self["\97\108\108"..string.char(112, 97, 116).."\104"][2])do SendModRPCToClient(_B_ug_,_b_u__G["\105\100"],string.char(81, 117, 101, 114, 121),__B__Ug_[string.char(108, 114, 117):reverse()],__B__Ug_["\109\101\116\104\111\100"],__B__Ug_["\100\97\116\97"],__B__Ug_["\105\100"])return end;for B__u__G_,B_U__G_ in pairs(self["\97\108\108\112"..string.char(97, 116, 104)][1])do if B_U__G_["\72\97\115\65\100\109"..string.char(105, 110)]then SendModRPCToShard(B_ug,B_U__G_[string.char(105, 100)],string.char(81, 117, 101).."\114\121",__B__Ug_[string.char(117, 114, 108)],__B__Ug_["\109\101\116"..("\100\111\104"):reverse()],__B__Ug_["\100\97\116\97"],__B__Ug_["\105\100"])return end end;for __bUG__,_bug in pairs(self[string.char(97, 108, 108, 112, 97).."\116\104"][3])do SendModRPCToClient(_B_ug_,_bug["\105\100"],"\81\117\101\114".."\121",__B__Ug_["\117\114\108"],__B__Ug_[string.char(109, 101, 116, 104, 111, 100)],__B__Ug_[("\97\116\97\100"):reverse()],__B__Ug_["\105\100"])return end;for __b_u_G,_b__U__G__ in pairs(self["\97\108\108\112".."\97\116\104"][1])do if _b__U__G__["\72\97\115\80".."\108\97\121"..string.char(101, 114)]then SendModRPCToShard(B_ug,_b__U__G__["\105\100"],string.char(81, 117, 101).."\114\121",__B__Ug_["\117\114\108"],__B__Ug_["\109\101\116\104\111\100"],__B__Ug_["\100\97\116\97"],__B__Ug_[("\100\105"):reverse()])return end end;_bu_g_(__B__Ug_["\117\114\108"],function(...)self:TaskOK(__B__Ug_,...)end,__B__Ug_["\109\101\116\104\111"..("\100"):reverse()],__B__Ug_[string.char(100, 97, 116, 97)])return end end;function QueryManagerClass:UpdateTask()if B__UG__ and TheWorld then if HasHttpOK()then if not TheWorld["\110\101\116"]:HasTag(__B_U_G_)then TheWorld["\110\101\116"]:AddTag(__B_U_G_)end else if TheWorld[string.char(110, 101, 116)]:HasTag(__B_U_G_)then TheWorld["\110\101\116"]:RemoveTag(__B_U_G_)end end end;for __Bu_g_,_B__uG_ in pairs(self[string.char(114, 112, 99, 115)])do self:HandleRPCOK(unpack(_B__uG_))end;self["\114\112\99\115"]={}local _B__uG__={}local __bU_G_=GetTimeRealSeconds()for __b_UG__,_B__ug_ in pairs(self["\116\97\115\107\115"])do if __b_UG__[("\97\116\115"):reverse().."\114\116"]then if __b_UG__[string.char(116, 105, 109, 101, 111, 117).."\116"]<=__bU_G_ then _B__uG__[__b_UG__]=1 end end end;for b__u_g__,b__u__G_ in pairs(_B__uG__)do self:Timeout(b__u_g__)self["\116\97\115\107\115"][b__u_g__]=nil end;local _bUg__=3;for __b_U_g__,__BuG in pairs(self[string.char(116, 97, 115).."\107\115"])do if _bUg__<1 then break end;if not __b_U_g__["\115\116\97\114\116"]then _bUg__=_bUg__-1;self:StartTask(__b_U_g__)end end end;QueryManager=QueryManagerClass()AddSimPostInit(function() QueryManager[string.char(116, 97, 115, 107)]=TheWorld:DoPeriodicTask(0.1,function()QueryManager:UpdateTask()end,0) QueryManager[string.char(112, 97, 116, 104, 114).."\101\112\111\114"..string.char(116, 116, 97, 115, 107)]=TheWorld:DoPeriodicTask(10,function()if not B__UG__ and __B_Ug__ and IsHttpOK()then SendModRPCToServer(_Bu__g,"\80\97\116\104\82\101"..string.char(112, 111, 114, 116),(384*499-239-162+440==191655))elseif B__UG__ and __B_Ug__ then ClearTableBy(QueryManager["\97\108\108\112\97\116".."\104"][1],function(b_U_g__,__b__U_G__)if __b__U_G__ and not Shard_IsWorldAvailable(__b__U_G__["\105\100"])then return(244*91+237==22441)end;return(181-446-12==-272)end)ClearTableBy(QueryManager["\97\108\108\112".."\97\116\104"][2],function(b__U__G,_Bu_G)if _Bu_G and not UserToClient(_Bu_G["\105\100"])then return(338+86-349+251+410~=739)end;return(465-56-429-122==-138)end)ClearTableBy(QueryManager["\97\108\108\112".."\97\116\104"][3],function(__B_u__g_,BUg_)if BUg_ and not UserToClient(BUg_[string.char(105, 100)])then return(161-370-277~=-483)end;return( false and not false and  false and  true and  false and not true and  false and not false and  false)end)local __b__U__G_=next(QueryManager[("\116\97\112\108\108\97"):reverse().."\104"][2])and(73+47*26+258~=1562)or(126*209+448~=26782)if IsHttpOK()then __b__U__G_=(318*458-114-83==145447)end;local _b__u_g__= next(QueryManager["\97\108\108\112".."\97\116\104"][2])and(472*151*137+364-249==9764379)or(185+64*129*367==3030146)SendModRPCToShard(B_ug,nil,"\80\97\116\104".."\82\101\112\111\114\116",__b__U__G_,_b__u_g__)end end,0)end)QueryTask=Class(function(self,__bu_g_,__b_u_G__,BUG,B_u_G)self[string.char(105, 100)]="" self[string.char(102, 114, 111).."\109\116\121\112".."\101"]="\115\101\108\102"self["\102\114\111"..string.char(109)]=""self["\99\98"]=__b_u_G__ or nil;self["\115\116\97\114\116"]=(98+467+91*496+353==46062)self["\116\105\109\101\111"..string.char(117, 116)]=30;self["\117\114\108"]=__bu_g_;self["\109\101\116\104".."\111\100"]=(BUG== ("\83\79\80"):reverse().."\84")and"\80\79\83".."\84"or"\71\69\84"self["\100\97\116\97"]=B_u_G end)